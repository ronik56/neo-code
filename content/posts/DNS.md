---
title: "מה זה DNS, ומה הוא עושה?"
date: 2020-08-17T16:59:21+03:00
draft: false
categories: [""]
tags: [""]
featured_image: /DNS.png
---

פרוטוקול ה-DNS, או בשמו המלא Domain Name System, הוא פרוטקול שכולנו משתמשים בו כל הזמן והופך את האינטרט לנגיש לכולם. למרות זאת, הוא לא זוכה למספיק יחס.

ה-DNS הוא למעשה ספר הטלפונים של האינטרנט. כשאנחנו מנסים להיכנס לויקיפדיה לדוגמה, אנחנו מזינים לשורת הכתובת בדפדפן כתובת שנוחה לבני אדם- wikipedia.org. הבעיה היא שמחשבים לא עובדים בצורה כזו, הכתובות של מחשבים הן כתובות IP מספריות. למעשה הכתובת של ויקיפדיה עבור המחשב היא 91.198.174.192 בפרוטקול IPv4 או 2620:0:862:ed1a::1 בפרוטקול Ipv6, ואף אחת מהן לא ידידותית למשתמש.

וכאן ה-DNS נכנס לתמונה. ה-DNS מקשר בין הכתובת ה"אנושית" wikipedia.org לכתובת האמיתית-  91.198.174.192.

איך ה-DNS יודע לקשר כתובות?

כשאנחנו מזינים את הכתובת ולוחצים אינטר, נשלחת בקשה לשרת ה-DNS שלנו. איזה שרת בדיוק? זה תלוי. בהנחה שלא שיניתם את הגדרות ה-DNS אצלכם (בראוטר/מחשב/פלאפון וכו'), אתם משתשמשים בשרתי ברירת המחדל שהם השרתים של ספקית האינטרנט שלכם (שזה צעד ממש לא חכם, אבל זה לפוסט אחר). 

השרת הזה נקרא DNS recursive resolver ואפשר להסתכל עליו כמעיין ספרנית שמקבלת שאילתא (query) ואז הולכת לחפש את הספר שמתאים לה (כתובת דומיין) על ידי סדרה של בקשות בשביל למצוא את המיקום המדויק. 

התחנה הראשונה היא שרת Root Nameserver. השרת הזה למעשה מפנה את הספרנית למדור הנכון בספריה, שהוא ה-TLD (Top Level Domain) Nameserver המתאים או במילים אחרות- לשרת המתאים לסיומת הדומיין. בדוגמה שלwikipedia.org, ה-Root יפנה אותנו (כלומר את ה-DNS resolver) ל-TLD Nameserver שמתאים לסיומת org.
 
מהרוט אנחנו מגיעים ל-TLD Nameserver המתאים. ה-TLD NS הוא למעשה המדף המתאים בספריה שמכיל את כל הספרים בקטג' שביקשנו, או במקרה שלנו את כל הדומיינים עם סיומת org. ה-TLD NS מוצא את הרשומה של wikipedia.org ומפנה אותנו עם המידע הזה ל-Authoritative Nameserver, או לספר הספציפי.  

השלב האחרון במסע שלנו מגיע כשה-resolver שולח בקשה ל-Authoritative Nameserver. ה-Autoritative NS מספק לו את המידע שהוא בדמות רקורד DNS מלא שכולל את כתובת ה-IP המתאימה וכל תת כתובת אחרת שנחוצה וההפניות שלה (לדוגמה תת דומיין שמפנה למקום אחר).

מכאן ה-DNS resolver חוזר למחשב שלנו, מצויד בכתובת ה-IP של האתר שביקשנו. הדפדפן שולח בקשת HTTP לשרת ומקבל בחזרה את העמוד המבוקש. בנוסף לכך, גם ה-resolver וגם המחשב שלנו ישמרו את הבקשה הזו ב-cache כדי לחסוך את הטיול הזה בפעם הבאה שאנחנו צריכים את כתובת ה-IP של האתר.
